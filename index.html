<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Creador -->
    <meta name="author" content="Adrian Alonso Arambula">
    <title>Rhythm games</title>
    <!-- Estilos -->
    <link rel="stylesheet" href="css/style.css">
    <style>
        #colisionDiv {
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
        }

        #colisionDiv2 {
            width: 100px;
            height: 100px;
            background-color: blue;
            position: absolute;
        }

        #tecla1 {
            width: 90px;
            height: 90px;
            background-color: green;
            position: absolute;
        }

        #audioElement{
            display: none;
        }
    </style>
</head>

<body>
    <h1>Rhythm games</h1>

    <!-- Div colision -->
    <div id="colisionDiv"></div>
    <div id="colisionDiv2"></div>

    <!-- Divs de las teclas -->
    <div class="tecla" id="tecla1"></div>
    <audio id="audioElement" src="audio/coin-collect-retro-8-bit-sound-effect-145251.mp3"></audio>


    <script>
        // Obtener el elemento del div de colisión
        var tecla1 = document.getElementById('tecla1');
        var audioElement = document.getElementById('audioElement');


        function positionsCol() {
            // Obtener el elemento del div de colisión
            var colisionDiv = document.getElementById('colisionDiv');
            var colisionDiv2 = document.getElementById('colisionDiv2');

            // Establecer la posición inicial
            colisionDiv.style.left = 100 + 'px';
            colisionDiv.style.top = 200 + 'px';

            colisionDiv2.style.left = 100 + 'px';
            colisionDiv2.style.top = 350 + 'px';

            tecla1.style.left = 300 + 'px';
            tecla1.style.top = 210 + 'px';
        }

        // Llamar a la función para establecer la posición inicial
        positionsCol();

        var xPos = 900;
        // Función movimiento 
        function actualizarPosicion() {
            xPos -= 5; // ejemplo de ajuste, puedes cambiar según tus necesidades
            //colisionDiv.style.left = xPos + 'px';
            tecla1.style.left = xPos + 'px';
            //console.log(xPos);

            // Llama a esta función nuevamente para actualizar la posición en el próximo fotograma
            if(tecla1.style.display != "none") {
                requestAnimationFrame(actualizarPosicion);
            }
        }


        // Función que se ejecuta cuando se presiona una tecla
        function onKeyDownHandler(event) {
            // Obtener el código de la tecla presionada
            var keyCode = event.keyCode;

            // Mostrar el código de la tecla en la consola
            console.log("Tecla presionada - Código: " + keyCode);

            if (keyCode == 82){
                tecla1.style.display = "block";
                xPos = 900;
            }

            if (keyCode == 90 && (tecla1.style.left > (100 + 'px') && tecla1.style.left < (200 + 'px'))) {
                tecla1.style.display = "none";
                console.log("Colision", tecla1.style.left);
                audioElement.play();
            } else {
                actualizarPosicion();
            }
        }

        // Asignar el evento keydown al documento
        document.addEventListener("keydown", onKeyDownHandler);
    </script>
</body>

</html>